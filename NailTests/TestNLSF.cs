using Microsoft.VisualStudio.TestTools.UnitTesting;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Concentus.Common.CPlusPlus;
using Concentus.Common;
using Concentus.Silk;
using Concentus.Silk.Structs;

namespace NailTests
{
    [TestClass]
    public class TestNLSF
    {
        [TestMethod]
        public void Test_silk_NLSF_VQ_1()
        {
            Pointer<int> output = Helpers.WrapWithArrayPointer(new int[100]);
            short[] inVectors = { 2980, 5960, 8939, 11916, 14894, 17874, 20853, 23830, 26810, 29788 };
            byte[] codebookVectors = { 12, 35, 60, 83, 108, 132, 157, 180, 206, 228, 15, 32, 55, 77, 101, 125, 151, 175, 201, 225, 19, 42, 66, 89, 114, 137, 162, 184, 209, 230, 12, 25, 50, 72, 97, 120, 147, 172, 200, 223, 26, 44, 69, 90, 114, 135, 159, 180, 205, 225, 13, 22, 53, 80, 106, 130, 156, 180, 205, 228, 15, 25, 44, 64, 90, 115, 142, 168, 196, 222, 19, 24, 62, 82, 100, 120, 145, 168, 190, 214, 22, 31, 50, 79, 103, 120, 151, 170, 203, 227, 21, 29, 45, 65, 106, 124, 150, 171, 196, 224, 30, 49, 75, 97, 121, 142, 165, 186, 209, 229, 19, 25, 52, 70, 93, 116, 143, 166, 192, 219, 26, 34, 62, 75, 97, 118, 145, 167, 194, 217, 25, 33, 56, 70, 91, 113, 143, 165, 196, 223, 21, 34, 51, 72, 97, 117, 145, 171, 196, 222, 20, 29, 50, 67, 90, 117, 144, 168, 197, 221, 22, 31, 48, 66, 95, 117, 146, 168, 196, 222, 24, 33, 51, 77, 116, 134, 158, 180, 200, 224, 21, 28, 70, 87, 106, 124, 149, 170, 194, 217, 26, 33, 53, 64, 83, 117, 152, 173, 204, 225, 27, 34, 65, 95, 108, 129, 155, 174, 210, 225, 20, 26, 72, 99, 113, 131, 154, 176, 200, 219, 34, 43, 61, 78, 93, 114, 155, 177, 205, 229, 23, 29, 54, 97, 124, 138, 163, 179, 209, 229, 30, 38, 56, 89, 118, 129, 158, 178, 200, 231, 21, 29, 49, 63, 85, 111, 142, 163, 193, 222, 27, 48, 77, 103, 133, 158, 179, 196, 215, 232, 29, 47, 74, 99, 124, 151, 176, 198, 220, 237, 33, 42, 61, 76, 93, 121, 155, 174, 207, 225, 29, 53, 87, 112, 136, 154, 170, 188, 208, 227, 24, 30, 52, 84, 131, 150, 166, 186, 203, 229, 37, 48, 64, 84, 104, 118, 156, 177, 201, 230 };

            NLSF.silk_NLSF_VQ(output, Helpers.WrapWithArrayPointer(inVectors), Helpers.WrapWithArrayPointer(codebookVectors), 32, 10);

            int[] expectedOutput = { 711785, 1646393, 98617, 2896969, 188569, 1527977, 4518841, 2811081, 1923049, 2791049, 141849, 3825193, 2633161, 3465961, 2761849, 3667289, 3415769, 1083209, 1720201, 3408489, 668089, 1044057, 1860601, 717929, 640825, 4932649, 1193945, 730361, 1694777, 1440265, 1087833, 1166201 };
            Helpers.AssertArrayDataEquals(expectedOutput, output);
        }

        [TestMethod]
        public void Test_silk_NLSF_VQ_2()
        {
            Pointer<int> err_Q26 = Helpers.WrapWithArrayPointer(new int[100]);
            short[] in_Q15 = { 2980, 5960, 8939, 11916, 14894, 17874, 20853, 23830, 26810, 29788, };
            byte[] pCB_Q8 = { 12, 35, 60, 83, 108, 132, 157, 180, 206, 228, 15, 32, 55, 77, 101, 125, 151, 175, 201, 225, 19, 42, 66, 89, 114, 137, 162, 184, 209, 230, 12, 25, 50, 72, 97, 120, 147, 172, 200, 223, 26, 44, 69, 90, 114, 135, 159, 180, 205, 225, 13, 22, 53, 80, 106, 130, 156, 180, 205, 228, 15, 25, 44, 64, 90, 115, 142, 168, 196, 222, 19, 24, 62, 82, 100, 120, 145, 168, 190, 214, 22, 31, 50, 79, 103, 120, 151, 170, 203, 227, 21, 29, 45, 65, 106, 124, 150, 171, 196, 224, 30, 49, 75, 97, 121, 142, 165, 186, 209, 229, 19, 25, 52, 70, 93, 116, 143, 166, 192, 219, 26, 34, 62, 75, 97, 118, 145, 167, 194, 217, 25, 33, 56, 70, 91, 113, 143, 165, 196, 223, 21, 34, 51, 72, 97, 117, 145, 171, 196, 222, 20, 29, 50, 67, 90, 117, 144, 168, 197, 221, 22, 31, 48, 66, 95, 117, 146, 168, 196, 222, 24, 33, 51, 77, 116, 134, 158, 180, 200, 224, 21, 28, 70, 87, 106, 124, 149, 170, 194, 217, 26, 33, 53, 64, 83, 117, 152, 173, 204, 225, 27, 34, 65, 95, 108, 129, 155, 174, 210, 225, 20, 26, 72, 99, 113, 131, 154, 176, 200, 219, 34, 43, 61, 78, 93, 114, 155, 177, 205, 229, 23, 29, 54, 97, 124, 138, 163, 179, 209, 229, 30, 38, 56, 89, 118, 129, 158, 178, 200, 231, 21, 29, 49, 63, 85, 111, 142, 163, 193, 222, 27, 48, 77, 103, 133, 158, 179, 196, 215, 232, 29, 47, 74, 99, 124, 151, 176, 198, 220, 237, 33, 42, 61, 76, 93, 121, 155, 174, 207, 225, 29, 53, 87, 112, 136, 154, 170, 188, 208, 227, 24, 30, 52, 84, 131, 150, 166, 186, 203, 229, 37, 48, 64, 84, 104, 118, 156, 177, 201, 230, };

            NLSF.silk_NLSF_VQ(err_Q26, Helpers.WrapWithArrayPointer(in_Q15), Helpers.WrapWithArrayPointer(pCB_Q8), 32, 10);

            int[] expectedOutput = { 711785, 1646393, 98617, 2896969, 188569, 1527977, 4518841, 2811081, 1923049, 2791049, 141849, 3825193, 2633161, 3465961, 2761849, 3667289, 3415769, 1083209, 1720201, 3408489, 668089, 1044057, 1860601, 717929, 640825, 4932649, 1193945, 730361, 1694777, 1440265, 1087833, 1166201, };
            Helpers.AssertArrayDataEquals(expectedOutput, err_Q26);
        }

        [TestMethod]
        public void Test_silk_NLSF_VQ_3()
        {
            Pointer<int> err_Q26 = Helpers.WrapWithArrayPointer(new int[100]);
            short[] in_Q15 = { 3893, 6062, 9036, 11364, 14516, 17581, 21159, 23221, 26737, 29461, };
            byte[] pCB_Q8 = { 12, 35, 60, 83, 108, 132, 157, 180, 206, 228, 15, 32, 55, 77, 101, 125, 151, 175, 201, 225, 19, 42, 66, 89, 114, 137, 162, 184, 209, 230, 12, 25, 50, 72, 97, 120, 147, 172, 200, 223, 26, 44, 69, 90, 114, 135, 159, 180, 205, 225, 13, 22, 53, 80, 106, 130, 156, 180, 205, 228, 15, 25, 44, 64, 90, 115, 142, 168, 196, 222, 19, 24, 62, 82, 100, 120, 145, 168, 190, 214, 22, 31, 50, 79, 103, 120, 151, 170, 203, 227, 21, 29, 45, 65, 106, 124, 150, 171, 196, 224, 30, 49, 75, 97, 121, 142, 165, 186, 209, 229, 19, 25, 52, 70, 93, 116, 143, 166, 192, 219, 26, 34, 62, 75, 97, 118, 145, 167, 194, 217, 25, 33, 56, 70, 91, 113, 143, 165, 196, 223, 21, 34, 51, 72, 97, 117, 145, 171, 196, 222, 20, 29, 50, 67, 90, 117, 144, 168, 197, 221, 22, 31, 48, 66, 95, 117, 146, 168, 196, 222, 24, 33, 51, 77, 116, 134, 158, 180, 200, 224, 21, 28, 70, 87, 106, 124, 149, 170, 194, 217, 26, 33, 53, 64, 83, 117, 152, 173, 204, 225, 27, 34, 65, 95, 108, 129, 155, 174, 210, 225, 20, 26, 72, 99, 113, 131, 154, 176, 200, 219, 34, 43, 61, 78, 93, 114, 155, 177, 205, 229, 23, 29, 54, 97, 124, 138, 163, 179, 209, 229, 30, 38, 56, 89, 118, 129, 158, 178, 200, 231, 21, 29, 49, 63, 85, 111, 142, 163, 193, 222, 27, 48, 77, 103, 133, 158, 179, 196, 215, 232, 29, 47, 74, 99, 124, 151, 176, 198, 220, 237, 33, 42, 61, 76, 93, 121, 155, 174, 207, 225, 29, 53, 87, 112, 136, 154, 170, 188, 208, 227, 24, 30, 52, 84, 131, 150, 166, 186, 203, 229, 37, 48, 64, 84, 104, 118, 156, 177, 201, 230, };

            NLSF.silk_NLSF_VQ(err_Q26, Helpers.WrapWithArrayPointer(in_Q15), Helpers.WrapWithArrayPointer(pCB_Q8), 32, 10);

            int[] expectedOutput = { 798011, 1532427, 203035, 2732939, 127147, 1587435, 4159467, 2546315, 1686619, 2484267, 196187, 3426043, 2171099, 2949595, 2426187, 3241051, 2975835, 983307, 1526747, 2853243, 561291, 1097963, 1376203, 880731, 549131, 4361291, 1542811, 999899, 1193947, 1746891, 1267787, 759099, };
            Helpers.AssertArrayDataEquals(expectedOutput, err_Q26);
        }

        [TestMethod]
        public void Test_silk_NLSF_VQ_laroia()
        {
            short[] inVectors = { 1922, 3858, 5783, 7710, 9637, 11567, 13494, 15419, 17349, 19274, 21203, 23131, 25058, 26986, 28911, 30845 };
            Pointer<short> output = Helpers.WrapWithArrayPointer(new short[100]);
            NLSF.silk_NLSF_VQ_weights_laroia(output, Helpers.WrapWithArrayPointer(inVectors), 16);

            short[] expectedOutput = { 135, 135, 136, 136, 135, 135, 136, 135, 135, 135, 134, 135, 135, 135, 135, 135 };
            Helpers.AssertArrayDataEquals(expectedOutput, output);
        }

        [TestMethod]
        public void Test_silk_NLSF_residual_dequant_1()
        {
            sbyte[] indices = { 0, 0, 0, 1, 0, 0, 0, 0, 0, 0 };
            byte[] pred_coef_Q8 = { 179, 138, 140, 148, 151, 149, 153, 151, 163, 116 };
            Pointer<short> output = Helpers.WrapWithArrayPointer(new short[100]);
            NLSF.silk_NLSF_residual_dequant(output, Helpers.WrapWithArrayPointer(indices), Helpers.WrapWithArrayPointer(pred_coef_Q8), 11796, 10);

            short[] expectedOutput = { 33, 48, 90, 165, 0, 0, 0, 0, 0, 0 };
            Helpers.AssertArrayDataEquals(expectedOutput, output);
        }

        [TestMethod]
        public void Test_silk_NLSF_residual_dequant_2()
        {
            sbyte[] indices = { -1, -1, 0, 0, 0, 0, 0, 1, 0, 0, };
            byte[] pred_coef_Q8 = { 116, 138, 140, 148, 151, 149, 153, 151, 163, 116, };
            Pointer<short> output = Helpers.WrapWithArrayPointer(new short[100]);
            NLSF.silk_NLSF_residual_dequant(output, Helpers.WrapWithArrayPointer(indices), Helpers.WrapWithArrayPointer(pred_coef_Q8), 11796, 10);

            short[] expectedOutput = { -239, -161, 10, 19, 33, 57, 98, 165, 0, 0, };
            Helpers.AssertArrayDataEquals(expectedOutput, output);
        }

        [TestMethod]
        public void Test_silk_NLSF_unpack()
        {
            byte[] pred_Q8 = { 179, 138, 140, 148, 151, 149, 153, 151, 163, 116 };
            silk_NLSF_CB_struct state = new silk_NLSF_CB_struct()
            {
                order = 10,
                nVectors = 32,
                quantStepSize_Q16 = 11796,
                invQuantStepSize_Q6 = 356,
                ec_sel = new Pointer<byte>(new byte[] { 16, 0, 0, 0, 0, 99, 66, 36, 36, 34, 36, 34, 34, 34, 34, 83, 69, 36, 52, 34 }),
                pred_Q8 = new Pointer<byte>(new byte[] { 179, 138, 140, 148, 151, 149, 153, 151, 163, 116 }),
            };

            Pointer<short> ec_ix = Pointer.Malloc<short>(32);
            NLSF.silk_NLSF_unpack(ec_ix, Helpers.WrapWithArrayPointer(pred_Q8), state, 2);

            short[] expectedOutput = { 18, 9, 9, 9, 9, 9, 9, 9, 9, 9 };
            Helpers.AssertArrayDataEquals(expectedOutput, ec_ix);
        }

        [TestMethod]
        public void Test_silk_NLSF_decode_1()
        {
            sbyte[] NSLFindices = { 2, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0 };

            silk_NLSF_CB_struct state = new silk_NLSF_CB_struct()
            {
                order = 10,
                nVectors = 32,
                quantStepSize_Q16 = 11796,
                invQuantStepSize_Q6 = 356,
                CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12, 35, 60, 83, 108, 132, 157, 180, 206, 228, 15, 32, 55, 77, 101, 125, 151, 175, 201, 225, 19, 42, 66, 89, 114, 137, 162, 184, 209, 230, 12, 25, 50, 72, 97, 120, 147, 172, 200, 223, 26, 44, 69, 90, 114, 135, 159, 180, 205, 225, 13, 22, 53, 80, 106, 130, 156, 180, 205, 228, 15, 25, 44, 64, 90, 115, 142, 168, 196, 222, 19, 24, 62, 82, 100, 120, 145, 168, 190, 214, 22, 31, 50, 79, 103, 120, 151, 170, 203, 227, 21, 29, 45, 65, 106, 124, 150, 171, 196, 224 }),
                ec_sel = new Pointer<byte>(new byte[] { 16, 0, 0, 0, 0, 99, 66, 36, 36, 34, 36, 34, 34, 34, 34, 83, 69, 36, 52, 34, 116, 102, 70, 68, 68, 176, 102, 68, 68, 34, 65, 85, 68, 84, 36, 116, 141, 152, 139, 170, 132, 187, 184, 216, 137, 132, 249, 168, 185, 139, 104, 102, 100, 68, 68, 178, 218, 185, 185, 170, 244, 216, 187, 187, 170, 244, 187, 187, 219, 138, 103, 155, 184, 185, 137, 116, 183, 155, 152, 136, 132, 217, 184, 184, 170, 164, 217, 171, 155, 139, 244, 169, 184, 185, 170, 164, 216, 223, 218, 138 }),
                pred_Q8 = new Pointer<byte>(new byte[] { 179, 138, 140, 148, 151, 149, 153, 151, 163, 116, 67, 82, 59, 92, 72, 100, 89, 92, 0, 0, 12, 35, 60, 83, 108, 132, 157, 180, 206, 228, 15, 32, 55, 77, 101, 125, 151, 175, 201, 225, 19, 42, 66, 89, 114, 137, 162, 184, 209, 230, 12, 25, 50, 72, 97, 120, 147, 172, 200, 223, 26, 44, 69, 90, 114, 135, 159, 180, 205, 225, 13, 22, 53, 80, 106, 130, 156, 180, 205, 228, 15, 25, 44, 64, 90, 115, 142, 168, 196, 222, 19, 24, 62, 82, 100, 120, 145, 168, 190, 214 }),
                deltaMin_Q15 = new Pointer<short>(new short[] { 250, 3, 6, 3, 3, 3, 4, 3, 3, 3, 461 }),
            };

            Pointer<short> pNLSF_Q15 = Pointer.Malloc<short>(100);
            NLSF.silk_NLSF_decode(pNLSF_Q15, Helpers.WrapWithArrayPointer(NSLFindices), state);

            short[] expectedOutput = { 2649, 5712, 9078, 12560, 14592, 17536, 20736, 23552, 26752, 29440 };
            Helpers.AssertArrayDataEquals(expectedOutput, pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_decode_2()
        {
            sbyte[] NSLFindices = { 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, };

            silk_NLSF_CB_struct state = new silk_NLSF_CB_struct()
            {
                order = 10,
                nVectors = 32,
                quantStepSize_Q16 = 11796,
                invQuantStepSize_Q6 = 356,
                CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12, 35, 60, 83, 108, 132, 157, 180, 206, 228, 15, 32, 55, 77, 101, 125, 151, 175, 201, 225, 19, 42, 66, 89, 114, 137, 162, 184, 209, 230, 12, 25, 50, 72, 97, 120, 147, 172, 200, 223, 26, 44, 69, 90, 114, 135, 159, 180, 205, 225, 13, 22, 53, 80, 106, 130, 156, 180, 205, 228, 15, 25, 44, 64, 90, 115, 142, 168, 196, 222, 19, 24, 62, 82, 100, 120, 145, 168, 190, 214, 22, 31, 50, 79, 103, 120, 151, 170, 203, 227, 21, 29, 45, 65, 106, 124, 150, 171, 196, 224, }),
                ec_sel = new Pointer<byte>(new byte[] { 16, 0, 0, 0, 0, 99, 66, 36, 36, 34, 36, 34, 34, 34, 34, 83, 69, 36, 52, 34, 116, 102, 70, 68, 68, 176, 102, 68, 68, 34, 65, 85, 68, 84, 36, 116, 141, 152, 139, 170, 132, 187, 184, 216, 137, 132, 249, 168, 185, 139, 104, 102, 100, 68, 68, 178, 218, 185, 185, 170, 244, 216, 187, 187, 170, 244, 187, 187, 219, 138, 103, 155, 184, 185, 137, 116, 183, 155, 152, 136, 132, 217, 184, 184, 170, 164, 217, 171, 155, 139, 244, 169, 184, 185, 170, 164, 216, 223, 218, 138, }),
                pred_Q8 = new Pointer<byte>(new byte[] { 179, 138, 140, 148, 151, 149, 153, 151, 163, 116, 67, 82, 59, 92, 72, 100, 89, 92, 0, 0, 12, 35, 60, 83, 108, 132, 157, 180, 206, 228, 15, 32, 55, 77, 101, 125, 151, 175, 201, 225, 19, 42, 66, 89, 114, 137, 162, 184, 209, 230, 12, 25, 50, 72, 97, 120, 147, 172, 200, 223, 26, 44, 69, 90, 114, 135, 159, 180, 205, 225, 13, 22, 53, 80, 106, 130, 156, 180, 205, 228, 15, 25, 44, 64, 90, 115, 142, 168, 196, 222, 19, 24, 62, 82, 100, 120, 145, 168, 190, 214, }),
                deltaMin_Q15 = new Pointer<short>(new short[] { 250, 3, 6, 3, 3, 3, 4, 3, 3, 3, 461, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32440, 31130, 31130, 26214, 32440, 29491, 0, 0, 81, 114, 101, 115, }),
            };

            Pointer<short> pNLSF_Q15 = Pointer.Malloc<short>(100);
            NLSF.silk_NLSF_decode(pNLSF_Q15, Helpers.WrapWithArrayPointer(NSLFindices), state);

            short[] expectedOutput = { 3518, 5376, 8448, 11392, 14592, 17536, 20736, 23552, 26752, 29440, };
            Helpers.AssertArrayDataEquals(expectedOutput, pNLSF_Q15);
        }

        [TestMethod]
        [Ignore] // FIXME: I cannot find a case which fully exercises this code path
        public void Test_silk_NLSF_stabilize()
        {
            Pointer<short> NLSF_Q15 = Helpers.WrapWithArrayPointer(new short[] { 2980, 5960, 8939, 11916, 14894, 17874, 20853, 23830, 26810, 29788, });
            Pointer<short> NDeltaMin_Q15 = Helpers.WrapWithArrayPointer(new short[] { 250, 3, 6, 3, 3, 3, 4, 3, 3, 3, 461, });

            NLSF.silk_NLSF_stabilize(NLSF_Q15, NDeltaMin_Q15, 10);

            short[] expectedOutput = { 2980, 5960, 8939, 11916, 14894, 17874, 20853, 23830, 26810, 29788, };

            Helpers.AssertArrayDataEquals(expectedOutput, NLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_del_dec_quant_1()
        {
            Pointer<sbyte> indices = Pointer.Malloc<sbyte>(10);
            short[] x_Q10 = new short[] { 83, 83, 70, 74, 42, 47, 16, 39, 8, 49, };
            short[] w_Q5 = new short[] { 28, 32, 32, 33, 33, 32, 32, 32, 31, 32, };
            byte[] pred_coef_Q8 = new byte[] { 179, 138, 140, 148, 151, 149, 153, 151, 163, 116, };
            short[] ec_ix = new short[] { 18, 9, 9, 9, 9, 9, 9, 9, 9, 9, };
            byte[] ec_rates_Q5 = new byte[] { 255, 255, 255, 131, 6, 145, 255, 255, 255, 255, 255, 236, 93, 15, 96, 255, 255, 255, 255, 255, 194, 83, 25, 71, 221, 255, 255, 255, 255, 162, 73, 34, 66, 162, 255, 255, 255, 210, 126, 73, 43, 57, 173, 255, 255, 255, 201, 125, 71, 48, 58, 130, 255, 255, 255, 166, 110, 73, 57, 62, 104, 210, 255, 255, 251, 123, 65, 55, 68, 100, 171, 255, 250, 0, 3, 0, 6, 0, 3, 0, 3, 0, 3, 0, 4, 0, 3, 0, 3, 0, 3, 0, 205, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 184, 126, 154, 121, 154, 121, 102, 102, 184, 126, 51, 115, 0, 0, 0, 0, 81, 0, 114, 0, 101, 0, 115, 0, 32, 0, 62, 0, 32, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 105, 0, 100, 0, 120, 0, 32, 0, 62, 0, 32, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 99, 0, 58, 0, 92, 0, 117, 0, 115, 0, 101, 0, 114, 0, 115, 0, 92, 0, 108, 0, 111, 0, 115, 0, 116, 0, 114, 0, 111, 0, 109, 0, 98, 0, 92, 0, 100, 0, 111, 0, 99, 0, 117, 0, 109, 0, 101, 0, 110, 0, 116, 0, 115, 0, 92, 0, 118, 0, 105, 0, 115, 0, 117, 0, 97, 0, 108, 0, 32, 0, 115, 0, 116, 0, 117, 0, 100, 0, 105, 0, 111, 0, 32, 0, 50, 0, 48, 0, 49, 0, 53, 0, 92, 0, 112, 0, 114, 0, 111, 0, 106, 0, 101, 0, 99, 0, 116, 0, 115, 0, 92, 0, 111, 0, 112, 0, 117, 0, 115, 0, 92, 0, 115, 0, 105, 0, 108, 0, 107, 0, 92, 0, 112, 0, 108, 0, 99, 0, 46, 0, 99, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 112, 0, 115, 0, 68, 0, 101, 0, 99, 0, 45, 0, 62, 0, 76, 0, };

            int returnVal = NLSF.silk_NLSF_del_dec_quant(indices,
                Helpers.WrapWithArrayPointer(x_Q10),
                Helpers.WrapWithArrayPointer(w_Q5),
                Helpers.WrapWithArrayPointer(pred_coef_Q8),
                Helpers.WrapWithArrayPointer(ec_ix),
                Helpers.WrapWithArrayPointer(ec_rates_Q5),
                11796,
                356,
                3137,
                10);

            sbyte[] expectedOutput = new sbyte[] { 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, };

            Assert.AreEqual(1415870, returnVal);
            Helpers.AssertArrayDataEquals(expectedOutput, indices);
        }

        [TestMethod]
        public void Test_silk_NLSF_del_dec_quant_2()
        {
            Pointer<sbyte> indices = Pointer.Malloc<sbyte>(10);
            short[] x_Q10 = new short[] { 64, 53, -16, 20, 99, 65, 32, 105, 65, 133, };
            short[] w_Q5 = new short[] { 30, 35, 33, 28, 31, 35, 30, 30, 30, 32, };
            byte[] pred_coef_Q8 = new byte[] { 179, 67, 140, 148, 151, 149, 153, 151, 163, 116, };
            short[] ec_ix = new short[] { 18, 27, 27, 27, 27, 18, 18, 18, 18, 18, };
            byte[] ec_rates_Q5 = new byte[] { 255, 255, 255, 131, 6, 145, 255, 255, 255, 255, 255, 236, 93, 15, 96, 255, 255, 255, 255, 255, 194, 83, 25, 71, 221, 255, 255, 255, 255, 162, 73, 34, 66, 162, 255, 255, 255, 210, 126, 73, 43, 57, 173, 255, 255, 255, 201, 125, 71, 48, 58, 130, 255, 255, 255, 166, 110, 73, 57, 62, 104, 210, 255, 255, 251, 123, 65, 55, 68, 100, 171, 255, 250, 0, 3, 0, 6, 0, 3, 0, 3, 0, 3, 0, 4, 0, 3, 0, 3, 0, 3, 0, 205, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 184, 126, 154, 121, 154, 121, 102, 102, 184, 126, 51, 115, 0, 0, 0, 0, 81, 0, 114, 0, 101, 0, 115, 0, 32, 0, 62, 0, 32, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 105, 0, 100, 0, 120, 0, 32, 0, 62, 0, 32, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 99, 0, 58, 0, 92, 0, 117, 0, 115, 0, 101, 0, 114, 0, 115, 0, 92, 0, 108, 0, 111, 0, 115, 0, 116, 0, 114, 0, 111, 0, 109, 0, 98, 0, 92, 0, 100, 0, 111, 0, 99, 0, 117, 0, 109, 0, 101, 0, 110, 0, 116, 0, 115, 0, 92, 0, 118, 0, 105, 0, 115, 0, 117, 0, 97, 0, 108, 0, 32, 0, 115, 0, 116, 0, 117, 0, 100, 0, 105, 0, 111, 0, 32, 0, 50, 0, 48, 0, 49, 0, 53, 0, 92, 0, 112, 0, 114, 0, 111, 0, 106, 0, 101, 0, 99, 0, 116, 0, 115, 0, 92, 0, 111, 0, 112, 0, 117, 0, 115, 0, 92, 0, 115, 0, 105, 0, 108, 0, 107, 0, 92, 0, 112, 0, 108, 0, 99, 0, 46, 0, 99, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 112, 0, 115, 0, 68, 0, 101, 0, 99, 0, 45, 0, 62, 0, 76, 0, };

            int returnVal = NLSF.silk_NLSF_del_dec_quant(indices,
                Helpers.WrapWithArrayPointer(x_Q10),
                Helpers.WrapWithArrayPointer(w_Q5),
                Helpers.WrapWithArrayPointer(pred_coef_Q8),
                Helpers.WrapWithArrayPointer(ec_ix),
                Helpers.WrapWithArrayPointer(ec_rates_Q5),
                11796,
                356,
                2543,
                10);

            sbyte[] expectedOutput = new sbyte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, };

            Assert.AreEqual(1533139, returnVal);
            Helpers.AssertArrayDataEquals(expectedOutput, indices);
        }

        [TestMethod]
        public void Test_silk_NLSF2A()
        {
            Pointer<short> output = Helpers.WrapWithArrayPointer(new short[100]);
            short[] NLSFdata = { 2649, 5712, 9078, 12560, 14592, 17536, 20736, 23552, 26752, 29440, };

            NLSF.silk_NLSF2A(output, Helpers.WrapWithArrayPointer(NLSFdata), 10);

            short[] expectedOutput = { 237, -328, 209, 358, 537, -68, -176, -273, 302, 89, };
            Helpers.AssertArrayDataEquals(expectedOutput, output);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_custom1()
        {
            Pointer<sbyte> NSLFindices = Helpers.WrapWithArrayPointer(new sbyte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, });
            Pointer<short> pNLSF_Q15 = Helpers.WrapWithArrayPointer(new short[] { 2980, 5960, 8939, 11916, 14894, 17874, 20853, 23830, 26810, 29788 });
            Pointer<short> pW_QW = Helpers.WrapWithArrayPointer(new short[] { 86, 86, 87, 88, 87, 86, 87, 87, 87, 87 });

            silk_NLSF_CB_struct state = new silk_NLSF_CB_struct()
            {
                order = 10,
                nVectors = 32,
                quantStepSize_Q16 = 11796,
                invQuantStepSize_Q6 = 356,
                CB1_iCDF = new Pointer<byte>(new byte[] { 212, 178, 148, 129, 108, 96, 85, 82, 79, 77, 61, 59, 57, 56, 51, 49, 48, 45, 42, 41, 40, 38, 36, 34, 31, 30, 21, 12, 10, 3, 1, 0, 255, 245, 244, 236, 233, 225, 217, 203, 190, 176, 175, 161, 149, 136, 125, 114, 102, 91, 81, 71, 60, 52, 43, 35, 28, 20, 19, 18, 12, 11, 5, 0, 16, 0, 0, 0, 0, 99, 66, 36, 36, 34, 36, 34, 34, 34, 34, 83, 69, 36, 52, 34, 116, 102, 70, 68, 68, 176, 102, 68, 68, 34, 65, 85, 68, 84, 36, 116, 141, 152, 139, 170, 132, 187, 184, 216, 137, 132, 249, 168, 185, 139, 104, 102, 100, 68, 68, 178, 218, 185, 185, 170, 244, 216, 187, 187, 170, 244, 187, 187, 219, 138, 103, 155, 184, 185, 137, 116, 183, 155, 152, 136, 132, 217, 184, 184, 170, 164, 217, 171, 155, 139, 244, 169, 184, 185, 170, 164, 216, 223, 218, 138, 214, 143, 188, 218, 168, 244, 141, 136, 155, 170, 168, 138, 220, 219, 139, 164, 219, 202, 216, 137, 168, 186, 246, 185, 139, 116, 185, 219, 185, 138, 100, 100, 134, 100, 102, 34, 68, 68, 100, 68, 168, 203, 221, 218, 168, 167, 154, 136, 104, 70, 164, 246, 171, 137, 139, 137, 155, 218, 219, 139, 255, 254, 253, 238, 14, 3, 2, 1, 0, 255, 254, 252, 218, 35, 3, 2, 1, 0, 255, 254, 250, 208, 59, 4, 2, 1, 0, 255, 254, 246, 194, 71, 10, 2, 1, 0, 255, 252, 236, 183, 82, 8, 2, 1, 0, 255, 252, 235, 180, 90, 17, 2, 1, 0, 255, 248, 224, 171, 97, 30, 4, 1, 0, 255, 254, 236, 173, 95, 37, 7, 1, 0, 255, 255, 255, 131, 6, 145, 255, 255, 255, 255, 255, 236, 93, 15, 96, 255, 255, 255, 255, 255, 194, 83, 25, 71, 221, 255, 255, 255, 255, 162, 73, 34, 66, 162, 255, 255, 255, 210, 126, 73, 43, 57, 173, 255, 255, 255, 201, 125, 71, 48, 58, 130, 255, 255, 255, 166, 110, 73, 57, 62, 104, 210, 255, 255, 251, 123, 65, 55, 68, 100, 171, 255, 250, 0, 3, 0, 6, 0, 3, 0, 3, 0, 3, 0, 4, 0, 3, 0, 3, 0, 3, 0, 205, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, }),
                CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12, 35, 60, 83, 108, 132, 157, 180, 206, 228, 15, 32, 55, 77, 101, 125, 151, 175, 201, 225, 19, 42, 66, 89, 114, 137, 162, 184, 209, 230, 12, 25, 50, 72, 97, 120, 147, 172, 200, 223, 26, 44, 69, 90, 114, 135, 159, 180, 205, 225, 13, 22, 53, 80, 106, 130, 156, 180, 205, 228, 15, 25, 44, 64, 90, 115, 142, 168, 196, 222, 19, 24, 62, 82, 100, 120, 145, 168, 190, 214, 22, 31, 50, 79, 103, 120, 151, 170, 203, 227, 21, 29, 45, 65, 106, 124, 150, 171, 196, 224, 30, 49, 75, 97, 121, 142, 165, 186, 209, 229, 19, 25, 52, 70, 93, 116, 143, 166, 192, 219, 26, 34, 62, 75, 97, 118, 145, 167, 194, 217, 25, 33, 56, 70, 91, 113, 143, 165, 196, 223, 21, 34, 51, 72, 97, 117, 145, 171, 196, 222, 20, 29, 50, 67, 90, 117, 144, 168, 197, 221, 22, 31, 48, 66, 95, 117, 146, 168, 196, 222, 24, 33, 51, 77, 116, 134, 158, 180, 200, 224, 21, 28, 70, 87, 106, 124, 149, 170, 194, 217, 26, 33, 53, 64, 83, 117, 152, 173, 204, 225, 27, 34, 65, 95, 108, 129, 155, 174, 210, 225, 20, 26, 72, 99, 113, 131, 154, 176, 200, 219, 34, 43, 61, 78, 93, 114, 155, 177, 205, 229, 23, 29, 54, 97, 124, 138, 163, 179, 209, 229, 30, 38, 56, 89, 118, 129, 158, 178, 200, 231, 21, 29, 49, 63, 85, 111, 142, 163, 193, 222, 27, 48, 77, 103, 133, 158, 179, 196, 215, 232, 29, 47, 74, 99, 124, 151, 176, 198, 220, 237, 33, 42, 61, 76, 93, 121, 155, 174, 207, 225, 29, 53, 87, 112, 136, 154, 170, 188, 208, 227, 24, 30, 52, 84, 131, 150, 166, 186, 203, 229, 37, 48, 64, 84, 104, 118, 156, 177, 201, 230, 212, 178, 148, 129, 108, 96, 85, 82, 79, 77, 61, 59, 57, 56, 51, 49, 48, 45, 42, 41, 40, 38, 36, 34, 31, 30, 21, 12, 10, 3, 1, 0, 255, 245, 244, 236, 233, 225, 217, 203, 190, 176, 175, 161, 149, 136, 125, 114, 102, 91, 81, 71, 60, 52, 43, 35, 28, 20, 19, 18, 12, 11, 5, 0, 16, 0, 0, 0, 0, 99, 66, 36, 36, 34, 36, 34, 34, 34, 34, 83, 69, 36, 52, 34, 116, 102, 70, 68, 68, 176, 102, 68, 68, 34, 65, 85, 68, 84, 36, 116, 141, 152, 139, 170, 132, 187, 184, 216, 137, 132, 249, 168, 185, 139, 104, 102, 100, 68, 68, 178, 218, 185, 185, 170, 244, 216, 187, 187, 170, 244, 187, 187, 219, 138, 103, 155, 184, 185, 137, 116, 183, 155, 152, 136, 132, 217, 184, 184, 170, 164, 217, 171, 155, 139, 244, 169, 184, 185, 170, 164, 216, 223, 218, 138, 214, 143, 188, 218, 168, 244, 141, 136, 155, 170, 168, 138, 220, 219, 139, 164, }),
                ec_sel = new Pointer<byte>(new byte[] { 16, 0, 0, 0, 0, 99, 66, 36, 36, 34, 36, 34, 34, 34, 34, 83, 69, 36, 52, 34, 116, 102, 70, 68, 68, 176, 102, 68, 68, 34, 65, 85, 68, 84, 36, 116, 141, 152, 139, 170, 132, 187, 184, 216, 137, 132, 249, 168, 185, 139, 104, 102, 100, 68, 68, 178, 218, 185, 185, 170, 244, 216, 187, 187, 170, 244, 187, 187, 219, 138, 103, 155, 184, 185, 137, 116, 183, 155, 152, 136, 132, 217, 184, 184, 170, 164, 217, 171, 155, 139, 244, 169, 184, 185, 170, 164, 216, 223, 218, 138, 214, 143, 188, 218, 168, 244, 141, 136, 155, 170, 168, 138, 220, 219, 139, 164, 219, 202, 216, 137, 168, 186, 246, 185, 139, 116, 185, 219, 185, 138, 100, 100, 134, 100, 102, 34, 68, 68, 100, 68, 168, 203, 221, 218, 168, 167, 154, 136, 104, 70, 164, 246, 171, 137, 139, 137, 155, 218, 219, 139, 255, 254, 253, 238, 14, 3, 2, 1, 0, 255, 254, 252, 218, 35, 3, 2, 1, 0, 255, 254, 250, 208, 59, 4, 2, 1, 0, 255, 254, 246, 194, 71, 10, 2, 1, 0, 255, 252, 236, 183, 82, 8, 2, 1, 0, 255, 252, 235, 180, 90, 17, 2, 1, 0, 255, 248, 224, 171, 97, 30, 4, 1, 0, 255, 254, 236, 173, 95, 37, 7, 1, 0, 255, 255, 255, 131, 6, 145, 255, 255, 255, 255, 255, 236, 93, 15, 96, 255, 255, 255, 255, 255, 194, 83, 25, 71, 221, 255, 255, 255, 255, 162, 73, 34, 66, 162, 255, 255, 255, 210, 126, 73, 43, 57, 173, 255, 255, 255, 201, 125, 71, 48, 58, 130, 255, 255, 255, 166, 110, 73, 57, 62, 104, 210, 255, 255, 251, 123, 65, 55, 68, 100, 171, 255, 250, 0, 3, 0, 6, 0, 3, 0, 3, 0, 3, 0, 4, 0, 3, 0, 3, 0, 3, 0, 205, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 184, 126, 154, 121, 154, 121, 102, 102, 184, 126, 51, 115, 0, 0, 0, 0, 81, 0, 114, 0, }),
                pred_Q8 = new Pointer<byte>(new byte[] { 179, 138, 140, 148, 151, 149, 153, 151, 163, 116, 67, 82, 59, 92, 72, 100, 89, 92, 0, 0, 12, 35, 60, 83, 108, 132, 157, 180, 206, 228, 15, 32, 55, 77, 101, 125, 151, 175, 201, 225, 19, 42, 66, 89, 114, 137, 162, 184, 209, 230, 12, 25, 50, 72, 97, 120, 147, 172, 200, 223, 26, 44, 69, 90, 114, 135, 159, 180, 205, 225, 13, 22, 53, 80, 106, 130, 156, 180, 205, 228, 15, 25, 44, 64, 90, 115, 142, 168, 196, 222, 19, 24, 62, 82, 100, 120, 145, 168, 190, 214, 22, 31, 50, 79, 103, 120, 151, 170, 203, 227, 21, 29, 45, 65, 106, 124, 150, 171, 196, 224, 30, 49, 75, 97, 121, 142, 165, 186, 209, 229, 19, 25, 52, 70, 93, 116, 143, 166, 192, 219, 26, 34, 62, 75, 97, 118, 145, 167, 194, 217, 25, 33, 56, 70, 91, 113, 143, 165, 196, 223, 21, 34, 51, 72, 97, 117, 145, 171, 196, 222, 20, 29, 50, 67, 90, 117, 144, 168, 197, 221, 22, 31, 48, 66, 95, 117, 146, 168, 196, 222, 24, 33, 51, 77, 116, 134, 158, 180, 200, 224, 21, 28, 70, 87, 106, 124, 149, 170, 194, 217, 26, 33, 53, 64, 83, 117, 152, 173, 204, 225, 27, 34, 65, 95, 108, 129, 155, 174, 210, 225, 20, 26, 72, 99, 113, 131, 154, 176, 200, 219, 34, 43, 61, 78, 93, 114, 155, 177, 205, 229, 23, 29, 54, 97, 124, 138, 163, 179, 209, 229, 30, 38, 56, 89, 118, 129, 158, 178, 200, 231, 21, 29, 49, 63, 85, 111, 142, 163, 193, 222, 27, 48, 77, 103, 133, 158, 179, 196, 215, 232, 29, 47, 74, 99, 124, 151, 176, 198, 220, 237, 33, 42, 61, 76, 93, 121, 155, 174, 207, 225, 29, 53, 87, 112, 136, 154, 170, 188, 208, 227, 24, 30, 52, 84, 131, 150, 166, 186, 203, 229, 37, 48, 64, 84, 104, 118, 156, 177, 201, 230, 212, 178, 148, 129, 108, 96, 85, 82, 79, 77, 61, 59, 57, 56, 51, 49, 48, 45, 42, 41, 40, 38, 36, 34, 31, 30, 21, 12, 10, 3, 1, 0, 255, 245, 244, 236, 233, 225, 217, 203, 190, 176, 175, 161, 149, 136, 125, 114, 102, 91, 81, 71, 60, 52, 43, 35, 28, 20, 19, 18, 12, 11, 5, 0, 16, 0, 0, 0, 0, 99, 66, 36, 36, 34, 36, 34, 34, 34, 34, 83, 69, 36, 52, 34, 116, 102, 70, 68, 68, 176, 102, 68, 68, 34, 65, 85, 68, 84, 36, 116, 141, 152, 139, 170, 132, 187, 184, 216, 137, 132, 249, 168, 185, 139, 104, 102, 100, 68, 68, 178, 218, 185, 185, 170, 244, 216, 187, 187, 170, 244, 187, 187, 219, 138, 103, 155, 184, 185, 137, 116, 183, 155, 152, 136, 132, 217, 184, 184, 170, 164, 217, 171, 155, 139, 244, 169, 184, 185, 170, 164, }),
                deltaMin_Q15 = new Pointer<short>(new short[] { 250, 3, 6, 3, 3, 3, 4, 3, 3, 3, 461, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32440, 31130, 31130, 26214, 32440, 29491, 0, 0, 81, 114, 101, 115, 32, 62, 32, 48, 0, 0, 0, 0, 105, 100, 120, 32, 62, 32, 48, 0, 0, 0, 0, 0, 99, 58, 92, 117, 115, 101, 114, 115, 92, 108, 111, 115, 116, 114, 111, 109, 98, 92, 100, 111, 99, 117, 109, 101, 110, 116, 115, 92, 118, 105, 115, 117, 97, 108, 32, 115, 116, 117, 100, 105, 111, 32, 50, 48, 49, 53, 92, 112, 114, 111, 106, 101, 99, 116, 115, 92, 111, 112, 117, 115, 92, 115, 105, 108, 107, 92, 112, 108, 99, 46, 99, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 112, 115, 68, 101, 99, 45, 62, 76, 80, 67, 95, 111, 114, 100, 101, 114, 32, 62, 61, 32, 49, 48, 0, 0, 0, 0, 0, 0, 105, 100, 120, 32, 62, 61, 32, 48, 0, 0, 0, 0, 0, 0, 99, 58, 92, 117, 115, 101, 114, 115, 92, 108, 111, 115, 116, 114, 111, 109, 98, 92, 100, 111, 99, 117, 109, 101, 110, 116, 115, 92, 118, 105, 115, 117, 97, 108, 32, 115, 116, 117, 100, 105, 111, 32, 50, 48, 49, 53, 92, 112, 114, 111, 106, 101, 99, 116, 115, 92, 111, 112, 117, 115, 92, 115, 105, 108, 107, 92, 99, 110, 103, 46, 99, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 105, 100, 120, 32, 60, 61, 32, 50, 53, 53, 0, 0, 0, 0, 112, 115, 68, 101, 99, 45, 62, 76, 80, 67, 95, 111, 114, 100, 101, 114, 32, 61, 61, 32, 49, 48, 32, 124, 124, 32, 112, 115, 68, 101, 99, 45, 62, 76, 80, 67, 95, 111, 114, 100, 101, 114, 32, 61, 61, 32, 49, 54, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 112, 115, 68, 101, 99, 45, 62, 112, 114, 101, 118, 95, 103, 97, 105, 110, 95, 81, 49, 54, 32, 33, 61, 32, 48, 0, 0, 0, 0, 0, 0, 0, 99, 58, 92, 117, 115, 101, 114, 115, 92, 108, 111, 115, 116, 114, 111, 109, 98, 92, 100, 111, 99, 117, 109, 101, 110, 116, 115, 92, 118, 105, 115, 117, 97, 108, 32, 115, 116, 117, 100, 105, 111, 32, 50, 48, 49, 53, 92, 112, 114, 111, 106, 101, 99, 116, 115, 92, 111, 112, 117, 115, }),
                ec_iCDF = new Pointer<byte>(new byte[] { 255, 254, 253, 238, 14, 3, 2, 1, 0, 255, 254, 252, 218, 35, 3, 2, 1, 0, 255, 254, 250, 208, 59, 4, 2, 1, 0, 255, 254, 246, 194, 71, 10, 2, 1, 0, 255, 252, 236, 183, 82, 8, 2, 1, 0, 255, 252, 235, 180, 90, 17, 2, 1, 0, 255, 248, 224, 171, 97, 30, 4, 1, 0, 255, 254, 236, 173, 95, 37, 7, 1, 0, 255, 255, 255, 131, 6, 145, 255, 255, 255, 255, 255, 236, 93, 15, 96, 255, 255, 255, 255, 255, 194, 83, 25, 71, 221, 255, 255, 255, 255, 162, 73, 34, 66, 162, 255, 255, 255, 210, 126, 73, 43, 57, 173, 255, 255, 255, 201, 125, 71, 48, 58, 130, 255, 255, 255, 166, 110, 73, 57, 62, 104, 210, 255, 255, 251, 123, 65, 55, 68, 100, 171, 255, 250, 0, 3, 0, 6, 0, 3, 0, 3, 0, 3, 0, 4, 0, 3, 0, 3, 0, 3, 0, 205, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 184, 126, 154, 121, 154, 121, 102, 102, 184, 126, 51, 115, 0, 0, 0, 0, 81, 0, 114, 0, 101, 0, 115, 0, 32, 0, 62, 0, 32, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 105, 0, 100, 0, 120, 0, 32, 0, 62, 0, 32, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 99, 0, 58, 0, 92, 0, 117, 0, 115, 0, 101, 0, 114, 0, 115, 0, 92, 0, 108, 0, 111, 0, 115, 0, 116, 0, 114, 0, 111, 0, 109, 0, 98, 0, 92, 0, 100, 0, 111, 0, 99, 0, 117, 0, 109, 0, 101, 0, 110, 0, 116, 0, 115, 0, 92, 0, 118, 0, 105, 0, 115, 0, 117, 0, 97, 0, 108, 0, 32, 0, 115, 0, 116, 0, 117, 0, 100, 0, 105, 0, 111, 0, 32, 0, 50, 0, 48, 0, 49, 0, 53, 0, 92, 0, 112, 0, 114, 0, 111, 0, 106, 0, 101, 0, 99, 0, 116, 0, 115, 0, 92, 0, 111, 0, 112, 0, }),
                ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255, 255, 255, 131, 6, 145, 255, 255, 255, 255, 255, 236, 93, 15, 96, 255, 255, 255, 255, 255, 194, 83, 25, 71, 221, 255, 255, 255, 255, 162, 73, 34, 66, 162, 255, 255, 255, 210, 126, 73, 43, 57, 173, 255, 255, 255, 201, 125, 71, 48, 58, 130, 255, 255, 255, 166, 110, 73, 57, 62, 104, 210, 255, 255, 251, 123, 65, 55, 68, 100, 171, 255, 250, 0, 3, 0, 6, 0, 3, 0, 3, 0, 3, 0, 4, 0, 3, 0, 3, 0, 3, 0, 205, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 184, 126, 154, 121, 154, 121, 102, 102, 184, 126, 51, 115, 0, 0, 0, 0, 81, 0, 114, 0, 101, 0, 115, 0, 32, 0, 62, 0, 32, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 105, 0, 100, 0, 120, 0, 32, 0, 62, 0, 32, 0, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 99, 0, 58, 0, 92, 0, 117, 0, 115, 0, 101, 0, 114, 0, 115, 0, 92, 0, 108, 0, 111, 0, 115, 0, 116, 0, 114, 0, 111, 0, 109, 0, 98, 0, 92, 0, 100, 0, 111, 0, 99, 0, 117, 0, 109, 0, 101, 0, 110, 0, 116, 0, 115, 0, 92, 0, 118, 0, 105, 0, 115, 0, 117, 0, 97, 0, 108, 0, 32, 0, 115, 0, 116, 0, 117, 0, 100, 0, 105, 0, 111, 0, 32, 0, 50, 0, 48, 0, 49, 0, 53, 0, 92, 0, 112, 0, 114, 0, 111, 0, 106, 0, 101, 0, 99, 0, 116, 0, 115, 0, 92, 0, 111, 0, 112, 0, 117, 0, 115, 0, 92, 0, 115, 0, 105, 0, 108, 0, 107, 0, 92, 0, 112, 0, 108, 0, 99, 0, 46, 0, 99, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 112, 0, 115, 0, 68, 0, 101, 0, 99, 0, 45, 0, 62, 0, 76, 0, }),
            };

            short[] out_pNLSF_Q15 = { 2649, 5712, 9078, 12560, 14592, 17536, 20736, 23552, 26752, 29440 };

            int returnVal = NLSF.silk_NLSF_encode(
                NSLFindices,
                pNLSF_Q15,
                state,
                pW_QW,
                3137,
                2,
                0);

            Assert.AreEqual(1726334, returnVal);
            Helpers.AssertArrayDataEquals(out_pNLSF_Q15, pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_custom2()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 1816, 2905, 3713, 5538, 6454, 9263, 9725, 13476, 14045, 14999, 18510, 21170, 23529, 25843, 28240, 30601 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 16;
            in_psNLSF_CB.quantStepSize_Q16 = 9830;
            in_psNLSF_CB.invQuantStepSize_Q6 = 427;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 7,23,38,54,69,85,100,116,131,147,162,178,193,208,223,239,13,25,41,55,69,83,98,112,127,142,157,171,187,203,220,236,15,
21,34,51,61,78,92,106,126,136,152,167,185,205,225,240,10,21,36,50,63,79,95,110,126,141,157,173,189,205,221,237,17,20,
37,51,59,78,89,107,123,134,150,164,184,205,224,240,10,15,32,51,67,81,96,112,129,142,158,173,189,204,220,236,8,21,37,
51,65,79,98,113,126,138,155,168,179,192,209,218,12,15,34,55,63,78,87,108,118,131,148,167,185,203,219,236,16,19,32,36,
56,79,91,108,118,136,154,171,186,204,220,237,11,28,43,58,74,89,105,120,135,150,165,180,196,211,226,241,6,16,33,46,60,
75,92,107,123,137,156,169,185,199,214,225,11,19,30,44,57,74,89,105,121,135,152,169,186,202,218,234,12,19,29,46,57,71,
88,100,120,132,148,165,182,199,216,233,17,23,35,46,56,77,92,106,123,134,152,167,185,204,222,237,14,17,45,53,63,75,89,
107,115,132,151,171,188,206,221,240,9,16,29,40,56,71,88,103,119,137,154,171,189,205,222,237,16,19,36,48,57,76,87,105,
118,132,150,167,185,202,218,236,12,17,29,54,71,81,94,104,126,136,149,164,182,201,221,237,15,28,47,62,79,97,115,129,142,
155,168,180,194,208,223,238,8,14,30,45,62,78,94,111,127,143,159,175,192,207,223,239,17,30,49,62,79,92,107,119,132,145,
160,174,190,204,220,235,14,19,36,45,61,76,91,108,121,138,154,172,189,205,222,238,12,18,31,45,60,76,91,107,123,138,154,
171,187,204,221,236,13,17,31,43,53,70,83,103,114,131,149,167,185,203,220,237,17,22,35,42,58,78,93,110,125,139,155,170,
188,206,224,240,8,15,34,50,67,83,99,115,131,146,162,178,193,209,224,239,13,16,41,66,73,86,95,111,128,137,150,163,183,
206,225,241,17,25,37,52,63,75,92,102,119,132,144,160,175,191,212,231,19,31,49,65,83,100,117,133,147,161,174,187,200,213,
227,242,18,31,52,68,88,103,117,126,138,149,163,177,192,207,223,239,16,29,47,61,76,90,106,119,133,147,161,176,193,209,224,
240,15,21,35,50,61,73,86,97,110,119,129,141,175,198,218,237});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 225,204,201,184,183,175,158,154,153,135,119,115,113,110,109,99,98,95,79,68,52,50,48,45,43,32,31,27,18,10,3,0,255,
251,235,230,212,201,196,182,167,166,163,151,138,124,110,104,90,78,76,70,69,57,45,34,24,21,11,6,5,4,3,0,0,0,
0,0,0,0,0,1,100,102,102,68,68,36,34,96,164,107,158,185,180,185,139,102,64,66,36,34,34,0,1,32,208,139,141,
191,152,185,155,104,96,171,104,166,102,102,102,132,1,0,0,0,0,16,16,0,80,109,78,107,185,139,103,101,208,212,141,139,
173,153,123,103,36,0,0,0,0,0,0,1,48,0,0,0,0,0,0,32,68,135,123,119,119,103,69,98,68,103,120,118,118,
102,71,98,134,136,157,184,182,153,139,134,208,168,248,75,189,143,121,107,32,49,34,34,34,0,17,2,210,235,139,123,185,137,
105,134,98,135,104,182,100,183,171,134,100,70,68,70,66,66,34,131,64,166,102,68,36,2,1,0,134,166,102,68,34,34,66,
132,212,246,158,139,107,107,87,102,100,219,125,122,137,118,103,132,114,135,137,105,171,106,50,34,164,214,141,143,185,151,121,103,
192,34,0,0,0,0,0,1,208,109,74,187,134,249,159,137,102,110,154,118,87,101,119,101,0,2,0,36,36,66,68,35,96,
164,102,100,36,0,2,33,167,138,174,102,100,84,2,2,100,107,120,119,36,197,24,0,255,254,253,244,12,3,2,1,0,255,
254,252,224,38,3,2,1,0,255,254,251,209,57,4,2,1,0,255,254,244,195,69,4,2,1,0,255,251,232,184,84,7,2,
1,0,255,254,240,186,86,14,2,1,0,255,254,239,178,91,30,5,1,0,255,248,227,177,100,19,2,1,0,255,255,255,156,
4,154,255,255,255,255,255,227,102,15,92,255,255,255,255,255,213,83,24,72,236,255,255,255,255,150,76,33,63,214,255,255,255,
190,121,77,43,55,185,255,255,255,245,137,71,43,59,139,255,255,255,255,131,66,50,66,107,194,255,255,166,116,76,55,53,125,
255,255,175,148,160,176,178,173,174,164,177,174,196,182,198,192,182,68,62,66,60,72,117,85,90,118,136,151,142,160,142,155,0,
0,37,115,46,76,84,80,73,110,100,101,120,32,61,32,110,101});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 175,148,160,176,178,173,174,164,177,174,196,182,198,192,182,68,62,66,60,72,117,85,90,118,136,151,142,160,142,155,0,0,37,
115,46,76,84,80,73,110,100,101,120,32,61,32,110,101,119,32,80,111,105,110,116,101,114,60,115,98,121,116,101,62,40,0,
0,0,37,115,46,78,76,83,70,73,110,100,105,99,101,115,32,61,32,110,101,119,32,80,111,105,110,116,101,114,60,115,98,
121,116,101,62,40,0,0,0,0,37,115,46,112,114,101,100,95,112,114,101,118,95,81,49,51,32,61,32,110,101,119,32,80,
111,105,110,116,101,114,60,115,104,111,114,116,62,40,0,0,37,115,46,115,83,105,100,101,32,61,32,110,101,119,32,80,111,
105,110,116,101,114,60,115,104,111,114,116,62,40,0,0,37,115,46,109,105,100,95,115,105,100,101,95,97,109,112,95,81,48,
32,61,32,110,101,119,32,80,111,105,110,116,101,114,60,105,110,116,62,40,0,0,37,115,46,98,117,102,32,61,32,110,101,
119,32,80,111,105,110,116,101,114,60,98,121,116,101,62,40,0,32,0,10,0,20,46,100,1,56,161,30,1,120,162,30,1,
36,161,30,1,184,162,30,1,88,163,30,1,160,163,30,1,232,163,30,1,179,138,140,148,151,149,153,151,163,116,67,82,59,
92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,
162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,
228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,
45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,
118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,
197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,
33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 0,0,0,0,0,0,0,1,100,102,102,68,68,36,34,96,164,107,158,185,180,185,139,102,64,66,36,34,34,0,1,32,208,
139,141,191,152,185,155,104,96,171,104,166,102,102,102,132,1,0,0,0,0,16,16,0,80,109,78,107,185,139,103,101,208,212,
141,139,173,153,123,103,36,0,0,0,0,0,0,1,48,0,0,0,0,0,0,32,68,135,123,119,119,103,69,98,68,103,120,
118,118,102,71,98,134,136,157,184,182,153,139,134,208,168,248,75,189,143,121,107,32,49,34,34,34,0,17,2,210,235,139,123,
185,137,105,134,98,135,104,182,100,183,171,134,100,70,68,70,66,66,34,131,64,166,102,68,36,2,1,0,134,166,102,68,34,
34,66,132,212,246,158,139,107,107,87,102,100,219,125,122,137,118,103,132,114,135,137,105,171,106,50,34,164,214,141,143,185,151,
121,103,192,34,0,0,0,0,0,1,208,109,74,187,134,249,159,137,102,110,154,118,87,101,119,101,0,2,0,36,36,66,68,
35,96,164,102,100,36,0,2,33,167,138,174,102,100,84,2,2,100,107,120,119,36,197,24,0,255,254,253,244,12,3,2,1,
0,255,254,252,224,38,3,2,1,0,255,254,251,209,57,4,2,1,0,255,254,244,195,69,4,2,1,0,255,251,232,184,84,
7,2,1,0,255,254,240,186,86,14,2,1,0,255,254,239,178,91,30,5,1,0,255,248,227,177,100,19,2,1,0,255,255,
255,156,4,154,255,255,255,255,255,227,102,15,92,255,255,255,255,255,213,83,24,72,236,255,255,255,255,150,76,33,63,214,255,
255,255,190,121,77,43,55,185,255,255,255,245,137,71,43,59,139,255,255,255,255,131,66,50,66,107,194,255,255,166,116,76,55,
53,125,255,255,175,148,160,176,178,173,174,164,177,174,196,182,198,192,182,68,62,66,60,72,117,85,90,118,136,151,142,160,142,
155,0,0,37,115,46,76,84,80,73,110,100,101,120,32,61,32,110,101,119,32,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,40,0,0,0,37,115,46,78,76,83,70,73,110,100,105,99,101,115,32,61,32,110,101,119,32,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,40,0,0,0,0,37,115,46,112});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,244,12,3,2,1,0,255,254,252,224,38,3,2,1,0,255,254,251,209,57,4,2,1,0,255,254,244,195,69,4,
2,1,0,255,251,232,184,84,7,2,1,0,255,254,240,186,86,14,2,1,0,255,254,239,178,91,30,5,1,0,255,248,227,
177,100,19,2,1,0,255,255,255,156,4,154,255,255,255,255,255,227,102,15,92,255,255,255,255,255,213,83,24,72,236,255,255,
255,255,150,76,33,63,214,255,255,255,190,121,77,43,55,185,255,255,255,245,137,71,43,59,139,255,255,255,255,131,66,50,66,
107,194,255,255,166,116,76,55,53,125,255,255,175,148,160,176,178,173,174,164,177,174,196,182,198,192,182,68,62,66,60,72,117,
85,90,118,136,151,142,160,142,155,0,0,37,115,46,76,84,80,73,110,100,101,120,32,61,32,110,101,119,32,80,111,105,110,
116,101,114,60,115,98,121,116,101,62,40,0,0,0,37,115,46,78,76,83,70,73,110,100,105,99,101,115,32,61,32,110,101,
119,32,80,111,105,110,116,101,114,60,115,98,121,116,101,62,40,0,0,0,0,37,115,46,112,114,101,100,95,112,114,101,118,
95,81,49,51,32,61,32,110,101,119,32,80,111,105,110,116,101,114,60,115,104,111,114,116,62,40,0,0,37,115,46,115,83,
105,100,101,32,61,32,110,101,119,32,80,111,105,110,116,101,114,60,115,104,111,114,116,62,40,0,0,37,115,46,109,105,100,
95,115,105,100,101,95,97,109,112,95,81,48,32,61,32,110,101,119,32,80,111,105,110,116,101,114,60,105,110,116,62,40,0,
0,37,115,46,98,117,102,32,61,32,110,101,119,32,80,111,105,110,116,101,114,60,98,121,116,101,62,40,0,32,0,10,0,
20,46,100,1,56,161,30,1,120,162,30,1,36,161,30,1,184,162,30,1,88,163,30,1,160,163,30,1,232,163,30,1,179,
138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,77,
101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,159,
180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,156,4,154,255,255,255,255,255,227,102,15,92,255,255,255,255,255,213,83,24,72,236,255,255,255,255,150,76,33,63,
214,255,255,255,190,121,77,43,55,185,255,255,255,245,137,71,43,59,139,255,255,255,255,131,66,50,66,107,194,255,255,166,116,
76,55,53,125,255,255,175,148,160,176,178,173,174,164,177,174,196,182,198,192,182,68,62,66,60,72,117,85,90,118,136,151,142,
160,142,155,0,0,37,115,46,76,84,80,73,110,100,101,120,32,61,32,110,101,119,32,80,111,105,110,116,101,114,60,115,98,
121,116,101,62,40,0,0,0,37,115,46,78,76,83,70,73,110,100,105,99,101,115,32,61,32,110,101,119,32,80,111,105,110,
116,101,114,60,115,98,121,116,101,62,40,0,0,0,0,37,115,46,112,114,101,100,95,112,114,101,118,95,81,49,51,32,61,
32,110,101,119,32,80,111,105,110,116,101,114,60,115,104,111,114,116,62,40,0,0,37,115,46,115,83,105,100,101,32,61,32,
110,101,119,32,80,111,105,110,116,101,114,60,115,104,111,114,116,62,40,0,0,37,115,46,109,105,100,95,115,105,100,101,95,
97,109,112,95,81,48,32,61,32,110,101,119,32,80,111,105,110,116,101,114,60,105,110,116,62,40,0,0,37,115,46,98,117,
102,32,61,32,110,101,119,32,80,111,105,110,116,101,114,60,98,121,116,101,62,40,0,32,0,10,0,20,46,100,1,56,161,
30,1,120,162,30,1,36,161,30,1,184,162,30,1,88,163,30,1,160,163,30,1,232,163,30,1,179,138,140,148,151,149,153,
151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,
19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,
80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,
151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,
219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 100,3,40,3,3,3,5,14,14,10,11,3,8,9,7,3,347,
0,5895,13862,21829,29796,-27773,-19806,-12095,-4129,6413,14121,21317,28770,-29057,-21603,-13381,-4900,
5391,13090,20029,27228,-30594,-22632,-12871,-3871,5386,12836,20287,28255,-29314,-21091,-12867,-4643,5137,
13093,20027,27481,-31109,-23402,-12872,-3872,3850,13088,20803,28768,-29055,-21090,-13123,-4900,5384,13093,
20289,29026,-30082,-22373,-16205,-9519,3852,14114,20031,27735,-31882,-22636,-13383,-4901,4880,9248,20280,
27739,-30602,-21606,-13126,-4644,7179,14891,22858,30825,-27001,-19291,-11324,-3614,4102,11809,19260,27484,
-30341,-22116,-14407,-7722,4875,11294,19001,26969,-30855,-22120,-13638,-5414,4876,11805,18233,25688,-31624,
-23148,-14410,-5672,5905,11811,19768,27228,-31109,-22632,-13127,-4642,4366,13613,19263,27481,-31629,-21609,
-12612,-3875,4105,10269,18232,26456,-30345,-21606,-12867,-4642,4880,12324,19513,26967,-31626,-22634,-13639,
-4902,4364,13853,20807,26718,-30594,-23403,-13898,-4643,7183,15919,24911,-32397,-25714,-19288,-12094,-4385,
3592,11550,20030,28510,-28801,-20577,-12352,-4129,7697,15921,23631,30571,-28284,-20832,-13122,-5156,4878,
11556,19517,27739,-30087,-21350,-12867,-4386,4620,11551,19516,27483,-30085,-21606,-13125,-4899,4365,11039,
17973,26451,-31886,-22635,-13383,-4644,5649,10787,20026,28253,-29827,-21861,-12612,-3872,3848,12834,21315,
29539,-28029,-19806,-11839,-4128,4109,16937,22089,28511,-30336,-23658,-12617,-3615,6417,13349,19263,26204,
-31625,-24432,-16465,-6188,7955,16689,25683,-31371,-24173,-17490,-10808,-3357,7954,17460,26456,32373,-27254,
-20061,-12352,-4129,7440,15663,23116,30570,-27771,-20319,-11839,-3872,5391,12835,18749,24918,30574,-29311,
-14673,-4646,-13087,-18231,-20553,-25954,-30823,29559,28273,25453,24418,17487,12852,11568,8235,6943,2578,
3,-1025,-6421,-13868,-18748,-22873,-26717,31882,26734,20058,17996,14661,8749,5400,1547,1029,3,
0,0,0,256,26212,17510,9284,24610,27556,-18018,-17996,26251,16960,8740,34,8193,-29744,
-16499,-18024,26779,-21664,-22936,26214,-31642,1,0,4096,16,27984,27470,-29767,25959,-11056,-29811,
-26195,26491,36,0,0,256,48,0,0,8192,-30908,30587,26487,25157,26436,30328,26230,
25159,-30586,-18275,-26186,-31093,-22320,19448,-28739,27513,12576,8738,34,529,-5166,31627,-30279,-31127,
-30878,-18840,-18588,-31061,18020,17988,16962,-31966,-22976,17510,548,1,-22906,17510,8738,-31678,-2348,
-29794,27499,26199,-9372,31357,30345,-31641,-30862,27017,27307,8754,-10588,-28787,-26695,26489,8896,0,
0,256,28112,-17590,-1658,-30305,28262,30362,25943,25975,512,9216,16932,9028,-23456,25702,36,
8450,-30041,26286,21604,514,27492,30584,-15068,24,-257,-2819,780,258,-256,-770,9952,515,
1,-257,-11781,1081,258,-256,-2818,17859,516,1,-1025,-18200,1876,258,-256,-3842,22202,
526,1,-257,-19729,7771,261,-256,-7176,25777,531,1,-1,-25345,-26108,-1,-1,-7169,
3942,-164,-1,-1,21461,18456,-20,-1,-26881,8524,-10689,-1,-16641,19833,14123,-71,-1,
-30219,11079,-29893,-1,-1,17027,16946,-15765,-1,29862,14156,32053,-1,-27473,-20320,-21070,-23378,
-20815,-18748});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 192, 282, 233, 214, 189, 329, 317, 264, 367, 174, 86, 104, 111, 110, 109, 115 });
            int in_NLSF_mu_Q20 = 2101;
            int in_nSurvivors = 32;
            int in_signalType = 1;
            short[] expected_pNLSF_Q15 =
            new short[] { 1997, 2670, 3978, 5556, 6865, 9278, 9963, 13550, 14026, 15369, 18225, 21376, 23680, 25984, 28160, 30336 };
            int expected_returnVal = 2891735;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_0()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 586, 2706, 7032, 9839, 13473, 16330, 20088, 23231, 25885, 29244, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 284, 91, 76, 82, 81, 79, 75, 90, 88, 76, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 2101;
            int in_nSurvivors = 2;
            int in_signalType = 1;
            short[] expected_pNLSF_Q15 =
            new short[] { 565, 3074, 7108, 9987, 13161, 16410, 20034, 23588, 25728, 28800, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1418443;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_1()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 1, -1, -1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 1299, 5770, 8737, 11465, 14643, 17415, 20698, 23705, 26834, 29411, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 129, 73, 92, 89, 88, 86, 82, 84, 91, 89, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3129;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 1339, 5376, 8448, 11392, 14592, 17536, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1169961;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_2()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, -1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 3560, 6137, 8743, 11728, 14340, 17552, 20447, 23416, 26356, 29286, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 86, 100, 93, 93, 90, 85, 89, 88, 88, 81, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3133;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 3189, 6531, 8448, 11392, 14592, 17536, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1648626;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_3()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 3067, 6339, 8859, 11419, 14987, 17376, 20626, 23831, 26437, 29430, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 82, 92, 103, 87, 90, 94, 80, 90, 93, 82, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3137;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 3189, 6531, 8448, 11392, 14592, 17536, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1479943;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_4()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 3294, 6057, 8817, 11314, 14390, 17484, 21062, 23110, 26718, 29067, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 86, 94, 99, 94, 84, 78, 100, 100, 91, 90, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3137;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 3189, 6531, 8448, 11392, 14592, 17536, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1688046;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_5()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 3374, 5814, 8956, 11448, 14764, 17593, 20001, 22955, 26496, 28516, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 91, 94, 93, 91, 85, 100, 98, 81, 101, 94, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3133;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 3328, 5632, 8832, 11520, 14592, 17280, 20352, 23040, 26240, 28800, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1588867;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_6()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 3000, 6341, 9211, 11728, 14491, 17531, 20792, 24005, 26759, 29153, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 82, 84, 97, 99, 90, 83, 80, 87, 101, 90, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3137;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 2833, 5992, 9603, 11392, 14592, 17536, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1554906;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_7()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 3066, 5952, 8475, 11637, 15152, 17724, 20525, 23722, 26724, 29577, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 87, 96, 92, 78, 87, 96, 86, 83, 88, 86, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3137;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 2432, 5376, 8448, 11392, 14592, 17536, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1629914;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_8()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 3158, 5968, 8829, 11169, 14700, 18259, 20577, 23890, 26560, 28690, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 87, 91, 101, 93, 73, 92, 95, 88, 110, 93, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3137;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 3334, 5645, 8901, 11650, 14817, 17670, 21022, 24182, 26240, 28800, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 2206036;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_9()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 4, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 2844, 6085, 8845, 11861, 15197, 17737, 20723, 23615, 26910, 28972, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 86, 87, 90, 82, 90, 94, 88, 84, 102, 97, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3137;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 2550, 5565, 8805, 12064, 15760, 17536, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1749717;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_10()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 3212, 5922, 8594, 11598, 14552, 17363, 20242, 23817, 26433, 29527, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 88, 97, 92, 87, 90, 91, 81, 86, 92, 82, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3105;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 3518, 5376, 8448, 11392, 14592, 17536, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1560513;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_11()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 3030, 5864, 8516, 11808, 15031, 17673, 20967, 23568, 26765, 29517, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 89, 95, 88, 79, 89, 88, 89, 90, 87, 87, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3133;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 2432, 5376, 8448, 11392, 14592, 17536, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1492987;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_12()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 3053, 6054, 8563, 12067, 14610, 16991, 20814, 23968, 26812, 29190, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 85, 95, 89, 88, 106, 89, 75, 87, 101, 91, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3133;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 3189, 6531, 8448, 11392, 14592, 17536, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1905925;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_13()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 3153, 5790, 9099, 12562, 14987, 17314, 20239, 23551, 26871, 29469, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 90, 88, 76, 91, 110, 100, 83, 78, 89, 89, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3133;
            int in_nSurvivors = 2;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 3434, 5790, 9475, 12690, 14667, 17416, 20598, 23462, 26954, 29968, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 2000236;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_14()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 4, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 3285, 6337, 8749, 11869, 14940, 17246, 20988, 23115, 26614, 29557, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 81, 96, 96, 84, 98, 91, 96, 98, 81, 84, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 2101;
            int in_nSurvivors = 2;
            int in_signalType = 1;
            short[] expected_pNLSF_Q15 =
            new short[] { 3189, 6531, 8448, 11392, 14592, 17536, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1303195;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_15()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 1958, 4087, 6938, 9750, 12807, 15938, 19251, 22359, 25491, 28955, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 127, 106, 91, 88, 83, 80, 81, 83, 78, 71, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 2101;
            int in_nSurvivors = 2;
            int in_signalType = 1;
            short[] expected_pNLSF_Q15 =
            new short[] { 1920, 4096, 7040, 9856, 12928, 16000, 19328, 22400, 25728, 28800, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 693334;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_16()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 534, 3818, 6912, 10053, 13288, 16529, 19729, 22702, 26191, 29602, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 284, 81, 83, 81, 80, 80, 84, 81, 75, 79, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 2101;
            int in_nSurvivors = 4;
            int in_signalType = 1;
            short[] expected_pNLSF_Q15 =
            new short[] { 553, 3700, 6784, 10240, 13568, 16640, 19968, 23040, 26240, 29184, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1677691;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_17()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 5, -2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 916, 5313, 8829, 11811, 13713, 18253, 20806, 24310, 26386, 29957, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 172, 66, 80, 111, 96, 79, 88, 100, 99, 82, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3047;
            int in_nSurvivors = 4;
            int in_signalType = 1;
            short[] expected_pNLSF_Q15 =
            new short[] { 1451, 5551, 8784, 12015, 13651, 17939, 21422, 24707, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 2837009;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_18()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, -1, 0, 0, 1, -1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 2304, 4380, 7135, 10091, 13216, 16258, 19495, 22649, 26064, 29206, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 119, 110, 91, 85, 84, 83, 81, 79, 79, 77, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 2101;
            int in_nSurvivors = 4;
            int in_signalType = 1;
            short[] expected_pNLSF_Q15 =
            new short[] { 1920, 4096, 7040, 9856, 12928, 16000, 19328, 22400, 25728, 28800, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1148668;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_19()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 1624, 3620, 6255, 8769, 11758, 14976, 19491, 22362, 26392, 29270, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 145, 114, 101, 95, 83, 69, 74, 77, 77, 82, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 2101;
            int in_nSurvivors = 4;
            int in_signalType = 2;
            short[] expected_pNLSF_Q15 =
            new short[] { 1750, 3677, 6206, 8313, 12235, 14804, 19328, 22400, 25728, 28800, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1743438;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_20()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 1, 0, 0, 0, -1, 0, -1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 368, 5099, 8384, 11119, 15130, 17155, 21153, 23175, 26573, 29884, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 383, 66, 86, 79, 96, 96, 96, 102, 77, 84, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 3137;
            int in_nSurvivors = 4;
            int in_signalType = 0;
            short[] expected_pNLSF_Q15 =
            new short[] { 250, 5376, 8448, 11392, 14592, 17536, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 2277462;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_21()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, -2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 2556, 4628, 7597, 10236, 13405, 16230, 19532, 22409, 26082, 29055, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 114, 107, 93, 90, 87, 85, 84, 80, 79, 79, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 2101;
            int in_nSurvivors = 4;
            int in_signalType = 1;
            short[] expected_pNLSF_Q15 =
            new short[] { 2452, 4452, 7596, 10476, 13574, 16474, 19388, 21858, 26368, 29184, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1230695;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_22()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 0, 1, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 852, 4711, 8982, 11571, 14492, 16957, 19767, 22461, 25518, 28408, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 186, 63, 80, 94, 97, 99, 94, 90, 87, 75, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 2101;
            int in_nSurvivors = 4;
            int in_signalType = 2;
            short[] expected_pNLSF_Q15 =
            new short[] { 1430, 4513, 8777, 11432, 14449, 17041, 19949, 22362, 25111, 28800, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 2111800;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_23()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 4, -1, -1, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 771, 2373, 8400, 10946, 14513, 16706, 20484, 23305, 26817, 29587, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 251, 102, 72, 87, 95, 93, 80, 83, 84, 88, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 2576;
            int in_nSurvivors = 4;
            int in_signalType = 1;
            short[] expected_pNLSF_Q15 =
            new short[] { 726, 2793, 8224, 10989, 13899, 16361, 20736, 23552, 26752, 29440, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 2030900;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }

        [TestMethod]
        public void Test_silk_NLSF_encode_24()
        {
            #region autogen
            Pointer<sbyte> in_NLSFIndices = Helpers.WrapWithArrayPointer<sbyte>(
            new sbyte[] { 2, 0, -2, 0, 0, 0, -1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 });
            Pointer<short> in_pNLSF_Q15 = Helpers.WrapWithArrayPointer<short>(
            new short[] { 2414, 4366, 7330, 10194, 13302, 16250, 19782, 22603, 26971, 29138, -13108, -13108, -13108, -13108, -13108, -13108 });
            silk_NLSF_CB_struct in_psNLSF_CB = new silk_NLSF_CB_struct();
            in_psNLSF_CB.nVectors = 32;
            in_psNLSF_CB.order = 10;
            in_psNLSF_CB.quantStepSize_Q16 = 11796;
            in_psNLSF_CB.invQuantStepSize_Q6 = 356;
            in_psNLSF_CB.CB1_NLSF_Q8 = new Pointer<byte>(new byte[] { 12,35,60,83,108,132,157,180,206,228,15,32,55,77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,
72,97,120,147,172,200,223,26,44,69,90,114,135,159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,
142,168,196,222,19,24,62,82,100,120,145,168,190,214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,
224,30,49,75,97,121,142,165,186,209,229,19,25,52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,
56,70,91,113,143,165,196,223,21,34,51,72,97,117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,
117,146,168,196,222,24,33,51,77,116,134,158,180,200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,
204,225,27,34,65,95,108,129,155,174,210,225,20,26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,
29,54,97,124,138,163,179,209,229,30,38,56,89,118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,
133,158,179,196,215,232,29,47,74,99,124,151,176,198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,
188,208,227,24,30,52,84,131,150,166,186,203,229,37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,
61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,
161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,
34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,
132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,
152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136,155,170,168,
138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219});
            in_psNLSF_CB.CB1_iCDF = new Pointer<byte>(new byte[] { 212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,34,31,30,21,12,10,3,1,0,255,
245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,28,20,19,18,12,11,5,0,16,0,
0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,84,36,
116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,187,187,
219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,138,214,
143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,134,100,
102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,3,2,
1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,236,183,
82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,0,255,
255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,162,
255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,65,
55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,112,
114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,111,
105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,95,
70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,37,
100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108});
            in_psNLSF_CB.pred_Q8 = new Pointer<byte>(new byte[] { 179,138,140,148,151,149,153,151,163,116,67,82,59,92,72,100,89,92,0,0,12,35,60,83,108,132,157,180,206,228,15,32,55,
77,101,125,151,175,201,225,19,42,66,89,114,137,162,184,209,230,12,25,50,72,97,120,147,172,200,223,26,44,69,90,114,135,
159,180,205,225,13,22,53,80,106,130,156,180,205,228,15,25,44,64,90,115,142,168,196,222,19,24,62,82,100,120,145,168,190,
214,22,31,50,79,103,120,151,170,203,227,21,29,45,65,106,124,150,171,196,224,30,49,75,97,121,142,165,186,209,229,19,25,
52,70,93,116,143,166,192,219,26,34,62,75,97,118,145,167,194,217,25,33,56,70,91,113,143,165,196,223,21,34,51,72,97,
117,145,171,196,222,20,29,50,67,90,117,144,168,197,221,22,31,48,66,95,117,146,168,196,222,24,33,51,77,116,134,158,180,
200,224,21,28,70,87,106,124,149,170,194,217,26,33,53,64,83,117,152,173,204,225,27,34,65,95,108,129,155,174,210,225,20,
26,72,99,113,131,154,176,200,219,34,43,61,78,93,114,155,177,205,229,23,29,54,97,124,138,163,179,209,229,30,38,56,89,
118,129,158,178,200,231,21,29,49,63,85,111,142,163,193,222,27,48,77,103,133,158,179,196,215,232,29,47,74,99,124,151,176,
198,220,237,33,42,61,76,93,121,155,174,207,225,29,53,87,112,136,154,170,188,208,227,24,30,52,84,131,150,166,186,203,229,
37,48,64,84,104,118,156,177,201,230,212,178,148,129,108,96,85,82,79,77,61,59,57,56,51,49,48,45,42,41,40,38,36,
34,31,30,21,12,10,3,1,0,255,245,244,236,233,225,217,203,190,176,175,161,149,136,125,114,102,91,81,71,60,52,43,35,
28,20,19,18,12,11,5,0,16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,
176,102,68,68,34,65,85,68,84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,
185,170,244,216,187,187,170,244,187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,
169,184,185,170,164,216,223,218,138,214,143,188,218,168,244,141,136});
            in_psNLSF_CB.ec_sel = new Pointer<byte>(new byte[] { 16,0,0,0,0,99,66,36,36,34,36,34,34,34,34,83,69,36,52,34,116,102,70,68,68,176,102,68,68,34,65,85,68,
84,36,116,141,152,139,170,132,187,184,216,137,132,249,168,185,139,104,102,100,68,68,178,218,185,185,170,244,216,187,187,170,244,
187,187,219,138,103,155,184,185,137,116,183,155,152,136,132,217,184,184,170,164,217,171,155,139,244,169,184,185,170,164,216,223,218,
138,214,143,188,218,168,244,141,136,155,170,168,138,220,219,139,164,219,202,216,137,168,186,246,185,139,116,185,219,185,138,100,100,
134,100,102,34,68,68,100,68,168,203,221,218,168,167,154,136,104,70,164,246,171,137,139,137,155,218,219,139,255,254,253,238,14,
3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,2,1,0,255,252,
236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,173,95,37,7,1,
0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,
66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,
123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,
46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,
80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,
88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,
91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,
116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,
0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0});
            in_psNLSF_CB.ec_iCDF = new Pointer<byte>(new byte[] { 255,254,253,238,14,3,2,1,0,255,254,252,218,35,3,2,1,0,255,254,250,208,59,4,2,1,0,255,254,246,194,71,10,
2,1,0,255,252,236,183,82,8,2,1,0,255,252,235,180,90,17,2,1,0,255,248,224,171,97,30,4,1,0,255,254,236,
173,95,37,7,1,0,255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,
255,255,162,73,34,66,162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,
104,210,255,255,251,123,65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,
1,0,0,37,115,46,112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,
110,116,101,114,60,80,111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,
116,115,46,77,65,88,95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,
114,101,100,73,120,91,37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,
114,60,115,98,121,116,101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,
51,115,0,0,0,0,81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,
0,120,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,
114,0,115,0,92,0,108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,
0,115,0,92,0,118,0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,
50,0,48,0,49,0,53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,
0,99,0,101,0,110,0,116,0,117,0,115,0,92,0,111,0});
            in_psNLSF_CB.ec_Rates_Q5 = new Pointer<byte>(new byte[] { 255,255,255,131,6,145,255,255,255,255,255,236,93,15,96,255,255,255,255,255,194,83,25,71,221,255,255,255,255,162,73,34,66,
162,255,255,255,210,126,73,43,57,173,255,255,255,201,125,71,48,58,130,255,255,255,166,110,73,57,62,104,210,255,255,251,123,
65,55,68,100,171,255,250,0,3,0,6,0,3,0,3,0,3,0,4,0,3,0,3,0,3,0,205,1,0,0,37,115,46,
112,114,101,100,73,120,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,80,
111,105,110,116,101,114,60,115,98,121,116,101,62,62,62,40,83,105,108,107,67,111,110,115,116,97,110,116,115,46,77,65,88,
95,70,82,65,77,69,83,95,80,69,82,95,80,65,67,75,69,84,41,59,10,0,0,37,115,46,112,114,101,100,73,120,91,
37,100,93,32,61,32,80,111,105,110,116,101,114,46,77,97,108,108,111,99,60,80,111,105,110,116,101,114,60,115,98,121,116,
101,62,62,40,50,41,59,10,0,0,0,0,0,0,0,0,0,184,126,154,121,154,121,102,102,184,126,51,115,0,0,0,0,
81,0,114,0,101,0,115,0,32,0,62,0,32,0,48,0,0,0,0,0,0,0,0,0,105,0,100,0,120,0,32,0,62,
0,32,0,48,0,0,0,0,0,0,0,0,0,0,0,99,0,58,0,92,0,117,0,115,0,101,0,114,0,115,0,92,0,
108,0,111,0,103,0,97,0,110,0,92,0,100,0,111,0,99,0,117,0,109,0,101,0,110,0,116,0,115,0,92,0,118,
0,105,0,115,0,117,0,97,0,108,0,32,0,115,0,116,0,117,0,100,0,105,0,111,0,32,0,50,0,48,0,49,0,
53,0,92,0,112,0,114,0,111,0,106,0,101,0,99,0,116,0,115,0,92,0,99,0,111,0,110,0,99,0,101,0,110,
0,116,0,117,0,115,0,92,0,111,0,112,0,117,0,115,0,45,0,102,0,105,0,120,0,92,0,115,0,105,0,108,0,
107,0,92,0,112,0,108,0,99,0,46,0,99,0,0,0,0,0,37,115,32,61,32,110,101,119,32,115,116,101,114,101,111,
95,100,101,99,95,115,116,97,116,101,40,41,59,10,0,0,0});
            in_psNLSF_CB.deltaMin_Q15 = new Pointer<short>(new short[] { 250,3,6,3,3,3,4,3,3,3,461,0,29477,28718,25970,18788,8312,
8253,28496,28265,25972,11890,24909,27756,25455,20540,26991,29806,29285,20540,26991,29806,29285,29500,
31074,25972,15934,10302,26963,27500,28483,29550,24948,29806,11891,16717,24408,21062,19777,21317,20575,
21061,20575,17217,17739,10580,2619,0,29477,28718,25970,18788,23416,25637,8285,8253,28496,28265,
25972,11890,24909,27756,25455,20540,26991,29806,29285,29500,31074,25972,15934,12840,15145,10,0,
0,0,0,32440,31130,31130,26214,32440,29491,0,0,81,114,101,115,32,62,
32,48,0,0,0,0,105,100,120,32,62,32,48,0,0,0,0,
0,99,58,92,117,115,101,114,115,92,108,111,103,97,110,92,100,
111,99,117,109,101,110,116,115,92,118,105,115,117,97,108,32,115,
116,117,100,105,111,32,50,48,49,53,92,112,114,111,106,101,99,
116,115,92,99,111,110,99,101,110,116,117,115,92,111,112,117,115,
45,102,105,120,92,115,105,108,107,92,112,108,99,46,99,0,0,
29477,15648,28192,30565,29472,25972,25970,24431,25956,24419,29811,29793,10341,15145,10,0,112,
115,68,101,99,45,62,76,80,67,95,111,114,100,101,114,32,62,
61,32,49,48,0,0,0,0,0,0,105,100,120,32,62,61,32,
48,0,0,0,0,99,58,92,117,115,101,114,115,92,108,111,103,
97,110,92,100,111,99,117,109,101,110,116,115,92,118,105,115,117,
97,108,32,115,116,117,100,105,111,32,50,48,49,53,92,112,114,
111,106,101,99,116,115,92,99,111,110,99,101,110,116,117,115,92,
111,112,117,115,45,102,105,120,92,115,105,108,107,92,99,110,103,
46,99,0,0,29477,15648,28192,30565,29472,27753,24427,19536,24387,29811,30066,29795,10536,
2619,0,0,105,100,120,32,60,61,32,50,53,53,0,0,0,0,
0,0,112,115,68,101,99,45,62,76,80,67,95,111,114,100,101,
114,32,61,61,32,49,48,32,124,124,32,112,115,68,101,99,45,
62,76,80,67,95,111,114,100,101,114,32,61,61,32,49,54,0,
0,24940,29811,24903,28265,28233,25956,20600,25970,118,0,112,115,68,101,99,45,
62,112,114,101,118,95,103,97,105,110,95,81,49,54,32,33,61,
32,48,0,28265,30064,17012,26229,30793,0,99,58,92,117,115,101,114,115,
92,108,111,103,97,110,92,100,111,99,117,109,101,110,116,115,92,
118,105,115,117,97,108,32,115,116,117,100,105,111,32,50,48,49,
53,92});
            Pointer<short> in_pW_QW = Helpers.WrapWithArrayPointer<short>(
            new short[] { 121, 111, 89, 87, 86, 81, 83, 76, 90, 96, -13108, -13108, -13108, -13108, -13108, -13108 });
            int in_NLSF_mu_Q20 = 2101;
            int in_nSurvivors = 4;
            int in_signalType = 1;
            short[] expected_pNLSF_Q15 =
            new short[] { 1920, 4108, 7074, 9925, 13062, 16237, 19738, 23098, 26916, 28800, -13108, -13108, -13108, -13108, -13108, -13108 };
            int expected_returnVal = 1414880;
            #endregion
            int returnVal = NLSF.silk_NLSF_encode(in_NLSFIndices, in_pNLSF_Q15, in_psNLSF_CB, in_pW_QW, in_NLSF_mu_Q20, in_nSurvivors, in_signalType);
            Assert.AreEqual(expected_returnVal, returnVal);
            Helpers.AssertArrayDataEquals(expected_pNLSF_Q15, in_pNLSF_Q15);
        }
    }
}
